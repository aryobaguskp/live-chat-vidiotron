<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Live Chat Café</title>
<script src="/socket.io/socket.io.js"></script>
<style>
body{font-family:Arial;background:#f5f5f5;padding:20px}
input,button{width:100%;padding:14px;margin-top:10px;font-size:16px}
button{background:#6b4f2c;color:#fff;border:none}
#info{color:red;margin-top:10px}
</style>
</head>
<body>

<h2>☕ Kirim Pesan</h2>
<input id="username" placeholder="Nama kamu" maxlength="15">
<input id="message" placeholder="Pesan" maxlength="60">
<button id="btn">Kirim</button>
<div id="info"></div>

<script>
const socket = io();
let locked=false;

btn.onclick=()=>{
 if(locked) return;
 const u=username.value.trim();
 const m=message.value.trim();
 if(!u||!m){info.innerText="Isi nama & pesan";return;}
 socket.emit("send-message",{username:u,message:m});
 message.value="";
 locked=true;btn.disabled=true;
};

socket.on("spam-warning",txt=>{
 let s=5;
 info.innerText=txt;
 const t=setInterval(()=>{
  s--;info.innerText=`Tunggu ${s} detik`;
  if(s<=0){clearInterval(t);locked=false;btn.disabled=false;info.innerText="";}
 },1000);
});

socket.on("admin-refresh",()=>{
 locked=false;btn.disabled=false;
});
</script>

</body>
</html>
